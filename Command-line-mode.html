<!DOCTYPE HTML><html lang=en class="sidebar-visible no-js rust"><head><meta charset=UTF-8><title>Command-line mode - Vim Reference Guide</title><meta content="text/html; charset=utf-8"http-equiv=Content-Type><meta name=description content="Vim Reference Guide"><meta name=viewport content="width=device-width, initial-scale=1"><meta name=theme-color content=#ffffff><link rel=icon href=favicon.svg><link rel="shortcut icon"href=favicon.png><link rel=stylesheet href=css/variables.css><link rel=stylesheet href=css/general.css><link rel=stylesheet href=css/chrome.css><link rel=stylesheet href=FontAwesome/css/font-awesome.css><link rel=stylesheet href=fonts/fonts.css><link rel=stylesheet href=highlight.css><link rel=stylesheet href=tomorrow-night.css><link rel=stylesheet href=ayu-highlight.css><link rel=stylesheet href=style.css><body><script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script><script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script><script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script><script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script><nav id=sidebar class=sidebar aria-label="Table of contents"><div class=sidebar-scrollbox><ol class=chapter><li class="chapter-item expanded affix"><a href=cover.html>Cover</a><li class="chapter-item expanded affix"><a href=buy.html>Buy PDF/EPUB versions</a><li class="chapter-item expanded affix"><a href=preface.html>Preface</a><li class="chapter-item expanded"><a href=Introduction.html><strong aria-hidden=true>1.</strong> Introduction</a><li class="chapter-item expanded"><a href=Insert-mode.html><strong aria-hidden=true>2.</strong> Insert mode</a><li class="chapter-item expanded"><a href=Normal-mode.html><strong aria-hidden=true>3.</strong> Normal mode</a><li class="chapter-item expanded"><a href=Command-line-mode.html class=active><strong aria-hidden=true>4.</strong> Command-line mode</a><li class="chapter-item expanded"><a href=Visual-mode.html><strong aria-hidden=true>5.</strong> Visual mode</a><li class="chapter-item expanded"><a href=Regular-Expressions.html><strong aria-hidden=true>6.</strong> Regular Expressions</a><li class="chapter-item expanded"><a href=Macro.html><strong aria-hidden=true>7.</strong> Macro</a><li class="chapter-item expanded"><a href=Customizing-Vim.html><strong aria-hidden=true>8.</strong> Customizing Vim</a><li class="chapter-item expanded"><a href=CLI-options.html><strong aria-hidden=true>9.</strong> CLI options</a></li><br><hr><li class="chapter-item expanded"><i id=git-repository-button class="fa fa-github"></i><a href=https://github.com/learnbyexample/vim_reference>   Source code</a><li class="chapter-item expanded"><i id=home-button class="fa fa-home"></i><a href=https://learnbyexample.github.io/>   My Blog</a><li class="chapter-item expanded"><i id=book-button class="fa fa-book"></i><a href=https://learnbyexample.github.io/books/>   My Books</a><li class="chapter-item expanded"><i id=mail-button class="fa fa-envelope"></i><a href=https://learnbyexample.gumroad.com/l/learnbyexample-weekly>   learnbyexample weekly</a></ol></div><div id=sidebar-resize-handle class=sidebar-resize-handle></div></nav><div id=page-wrapper class=page-wrapper><div class=page><div id=menu-bar-hover-placeholder></div><div id=menu-bar class="menu-bar sticky bordered"><div class=left-buttons><button id=sidebar-toggle class=icon-button type=button title="Toggle Table of Contents"aria-label="Toggle Table of Contents"aria-controls=sidebar><i class="fa fa-bars"></i></button><button id=theme-toggle class=icon-button type=button title="Change theme"aria-label="Change theme"aria-haspopup=true aria-expanded=false aria-controls=theme-list><i class="fa fa-paint-brush"></i></button><ul id=theme-list class=theme-popup aria-label=Themes role=menu><li role=none><button role=menuitem class=theme id=light>Light</button><li role=none><button role=menuitem class=theme id=rust>Rust (default)</button><li role=none><button role=menuitem class=theme id=coal>Coal</button><li role=none><button role=menuitem class=theme id=navy>Navy</button><li role=none><button role=menuitem class=theme id=ayu>Ayu</button></ul><button id=search-toggle class=icon-button type=button title="Search. (Shortkey: s)"aria-label="Toggle Searchbar"aria-expanded=false aria-keyshortcuts=S aria-controls=searchbar><i class="fa fa-search"></i></button></div><h1 class=menu-title>Vim Reference Guide</h1><div class=right-buttons><a href=https://learnbyexample.github.io title=Blog aria-label=Blog> <i id=home-button class="fa fa-home"></i> </a><a href=https://github.com/learnbyexample/vim_reference title="Git repository"aria-label="Git repository"> <i id=git-repository-button class="fa fa-github"></i> </a></div></div><div id=search-wrapper class=hidden><form id=searchbar-outer class=searchbar-outer><input type=search id=searchbar name=searchbar placeholder="Search this book ..."aria-controls=searchresults-outer aria-describedby=searchresults-header></form><div id=searchresults-outer class="searchresults-outer hidden"><div id=searchresults-header class=searchresults-header></div><ul id=searchresults></ul></div></div><script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script><div id=content class=content><main><div class=sidetoc><nav class=pagetoc></nav></div><h1 id=command-line-mode><a class=header href=#command-line-mode>Command-line mode</a></h1><p>Any operation in Command-line mode is completed by pressing the <kbd>Enter</kbd> key after which the mode changes back to the Normal mode. Press <kbd>Esc</kbd> key to ignore whatever is typed and return to the Normal mode.<p><strong>Documentation links</strong>:<ul><li><a href=https://vimhelp.org/usr_05.txt.html>:h usr_05.txt</a> — set your settings<li><a href=https://vimhelp.org/usr_07.txt.html>:h usr_07.txt</a> — editing more than one file<li><a href=https://vimhelp.org/usr_08.txt.html>:h usr_08.txt</a> — splitting windows<li><a href=https://vimhelp.org/usr_10.txt.html>:h usr_10.txt</a> — making big changes<li><a href=https://vimhelp.org/usr_21.txt.html>:h usr_21.txt</a> — go away and come back<li><a href=https://vimhelp.org/usr_03.txt.html#03.8>:h 3.8</a> — simple searches<li><a href=https://vimhelp.org/cmdline.txt.html>:h cmdline.txt</a> — reference manual for Command-line mode<li><a href=https://vimhelp.org/windows.txt.html>:h windows.txt</a> — reference manual for Editing with multiple windows and buffers</ul><h2 id=save-changes><a class=header href=#save-changes>Save changes</a></h2><ul><li><kbd>:w</kbd> save changes (<code>:w</code> is short for <code>:write</code>)<li><kbd>:w filename</kbd> provide a filename if it is a new file or if you want to save to another file<li><kbd>:wa</kbd> save changes made to all the files in the buffer (<code>:wa</code> is short for <code>:wall</code>)</ul><blockquote><p><img src=./images/info.svg alt=info> Appending <code>!</code> forces Vim to override errors, provided you have the appropriate permissions. For example, if you have edited a read-only file, <kbd>:w</kbd> will result in an error and <kbd>:w!</kbd> will save the changes. Another case where you'll get an error is <kbd>:w filename</kbd> if the file already exists. Using <kbd>:w! filename</kbd> will override the error.</blockquote><h2 id=quit-vim><a class=header href=#quit-vim>Quit Vim</a></h2><ul><li><kbd>:q</kbd> quit the current window (<code>:q</code> is short for <code>:quit</code>) <ul><li>if other tabs are open, they will remain open<li>you will get an error message if there are unsaved changes</ul><li><kbd>:qa</kbd> quit all (<code>:qa</code> is short for <code>:quitall</code>) <ul><li>you will get an error message if there are unsaved changes</ul><li><kbd>:confirm qa</kbd> similar to quit all, but provides a prompt for every file that has unsaved changes</ul><blockquote><p><img src=./images/info.svg alt=info> Append <code>!</code> to discard unsaved changes and quit.</blockquote><h2 id=combining-save-and-quit><a class=header href=#combining-save-and-quit>Combining Save and Quit</a></h2><ul><li><kbd>:wq</kbd> save changes and quit<li><kbd>:wqa</kbd> save changes for all files and quit</ul><blockquote><p><img src=./images/info.svg alt=info> Append <code>!</code> to override errors. Not all errors can be skipped, for example unsaved changes on a file that hasn't been named yet.</blockquote><h2 id=working-with-buffers-and-tabs><a class=header href=#working-with-buffers-and-tabs>Working with buffers and tabs</a></h2><p>Multiple files can be opened in Vim within the same tab window and/or in different tabs.<h3 id=buffers><a class=header href=#buffers>Buffers</a></h3><ul><li><kbd>:e</kbd> refreshes the current buffer (<code>:e</code> is short for <code>:edit</code>)<li><kbd>:e filename</kbd> open a particular file by its path, in the same window<li><kbd>:e #</kbd> switch back to the previous buffer, won't work if that buffer is not named <ul><li><kbd>:e#</kbd> can also be used (no space between <code>e</code> and <code>#</code>)</ul><li><kbd>Ctrl</kbd>+<kbd>6</kbd> switch back to the previous buffer, works even if that buffer is not named <ul><li><kbd>Ctrl</kbd>+<kbd>^</kbd> can also be used</ul><li><kbd>:e #1</kbd> open the first buffer<li><kbd>:e #2</kbd> open the second buffer, and so on<li><kbd>:buffers</kbd> show all buffers <ul><li><kbd>:ls</kbd> or <kbd>:files</kbd> can also be used</ul><li><kbd>:bn</kbd> open the next file in the buffer list (<code>:bn</code> is short for <code>:bnext</code>) <ul><li>opens the first buffer if you are on the last buffer</ul><li><kbd>:bp</kbd> open the previous file in the buffer list (<code>:bp</code> is short for <code>:bprevious</code>) <ul><li>opens the last buffer if you are on the first buffer</ul></ul><blockquote><p><img src=./images/info.svg alt=info> Use <kbd>:set hidden</kbd> if you want to switch to another buffer even if there are unsaved changes in the current buffer. Instead of this setting, you can also use <kbd>:hide edit filename</kbd> to hide the current unsaved buffer. You'll still get an error if you try to quit Vim without saving such buffers, unless you use the <code>!</code> modifier.</blockquote><blockquote><p><img src=./images/info.svg alt=info> See <a href=https://vimhelp.org/options.txt.html#%27autowrite%27>:h 'autowrite'</a> option if you want to automatically save changes when moving to another buffer.</blockquote><blockquote><p><img src=./images/info.svg alt=info> See <a href=https://vimhelp.org/usr_22.txt.html#22.4>:h 22.4</a> and <a href=https://vimhelp.org/windows.txt.html#buffer-hidden>:h buffer-hidden</a> for user and reference manuals about working with buffer list respectively.</blockquote><h3 id=tabs><a class=header href=#tabs>Tabs</a></h3><ul><li><kbd>:tabe filename</kbd> open the given file in a new tab (<code>:tabe</code> is short for <code>:tabedit</code>) <ul><li>if <code>filename</code> isn't specified, you'll get an unnamed empty window<li>by default, the new tab is opened to the right of the current window<li><kbd>:0tabe</kbd> open as the first tab<li><kbd>:$tabe</kbd> open as the last tab<li>see <a href=https://vimhelp.org/tabpage.txt.html#%3Atabnew>:h :tabe</a> for more details and features</ul><li><kbd>:tabn</kbd> switch to the next tab (<code>:tabn</code> is short for <code>:tabnext</code>) <ul><li>if tabs to the right are exhausted, switch to the first tab<li><kbd>gt</kbd> and <kbd>Ctrl</kbd>+<kbd>Page Down</kbd> can also be used<li><kbd>2gt</kbd> switch to the second tab (the number specified is absolute, not relative)</ul><li><kbd>:tabp</kbd> switch to the previous tab (<code>:tabp</code> is short for <code>:tabprevious</code>) <ul><li>if tabs to the left are exhausted, switch to the last tab<li><kbd>gT</kbd> and <kbd>Ctrl</kbd>+<kbd>Page Up</kbd> can also be used</ul><li><kbd>:tabr</kbd> switch to the first tab (<code>:tabr</code> is short for <code>:tabrewind</code>) <ul><li><kbd>:tabfirst</kbd> can also be used</ul><li><kbd>:tabl</kbd> switch to the last tab (<code>:tabl</code> is short for <code>:tablast</code>)<li><kbd>:tabm N</kbd> move the current tab to after <code>N</code> tabs from the start (<code>:tabm</code> is short for <code>:tabmove</code>) <ul><li><kbd>:tabm 0</kbd> move the current tab to the beginning<li><kbd>:tabm</kbd> move the current tab to the end</ul><li><kbd>:tabm +N</kbd> move the current tab <code>N</code> positions to the right<li><kbd>:tabm -N</kbd> move the current tab <code>N</code> positions to the left</ul><blockquote><p><img src=./images/info.svg alt=info> Buffer list includes all the files opened in all the tabs.</blockquote><blockquote><p><img src=./images/info.svg alt=info> You can also use the mouse to switch/move tabs in <code>gvim</code>.</blockquote><h3 id=splitting><a class=header href=#splitting>Splitting</a></h3><ul><li><kbd>:split filename</kbd> open file for editing in a new horizontal window, above the current window <ul><li>you can also use <kbd>:sp</kbd> instead of <kbd>:split</kbd><li><kbd>:set splitbelow</kbd> open horizontal splits below the current window</ul><li><kbd>:vsplit filename</kbd> open file for editing in a new vertical window, to the left of the current window <ul><li>you can also use <kbd>:vs</kbd> instead of <kbd>:vsplit</kbd><li><kbd>:set splitright</kbd> open vertical splits to the right of the current window</ul><li><kbd>Ctrl</kbd>+<kbd>w</kbd> followed by <kbd>w</kbd> switch to the below/right window for horizontal/vertical splits respectively <ul><li><kbd>Ctrl</kbd>+<kbd>w</kbd> followed by <kbd>Ctrl</kbd>+<kbd>w</kbd> also performs the same function<li>switches to the first split if you are on the last split</ul><li><kbd>Ctrl</kbd>+<kbd>w</kbd> followed by <kbd>W</kbd> switch to the above/left window for horizontal/vertical splits respectively <ul><li>switches to the last split if you are on the first split</ul><li><kbd>Ctrl</kbd>+<kbd>w</kbd> followed by <code>hjkl</code> or arrow keys, switch in the respective direction<li><kbd>Ctrl</kbd>+<kbd>w</kbd> followed by <kbd>t</kbd> or <kbd>b</kbd> switch to the top (first) or bottom (last) window<li><kbd>Ctrl</kbd>+<kbd>w</kbd> followed by <code>HJKL</code> (uppercase), moves the current split to the farthest possible location in the respective direction</ul><blockquote><p><img src=./images/info.svg alt=info> Vim adds a highlighted horizontal bar containing the filename for each split.</blockquote><blockquote><p><img src=./images/info.svg alt=info> If filename is not provided, the current one is used.</blockquote><h3 id=edit-all-buffers><a class=header href=#edit-all-buffers>Edit all buffers</a></h3><p>If multiple buffers are open and you want to apply a common editing task for all of them, one option is to use the <code>bufdo</code> command.<ul><li><kbd>:silent! bufdo %s/search/replace/g | update</kbd> perform substitution across all the buffers <ul><li><code>silent</code> skips displaying normal messages<li><code>!</code> skips error messages</ul><li>It is not an efficient way to open buffers just to search and replace a pattern across multiple files. Use tools like <code>sed</code>, <code>awk</code> and <code>perl</code> instead. <ul><li>See <a href=https://learnbyexample.github.io/books/>my book list</a> if you'd like to learn about such tools.</ul><li>See <a href=https://vimhelp.org/windows.txt.html#%3Abufdo>:h :bufdo</a>, <a href=https://vimhelp.org/windows.txt.html#%3Awindo>:h :windo</a> and <a href=https://vimhelp.org/various.txt.html#%3Asilent>:h :silent</a> for more details.</ul><p><strong>Further reading</strong><ul><li><a href=http://vimcasts.org/episodes/using-argdo-to-change-multiple-files/>How to change multiple files</a><li><a href=https://stackoverflow.com/q/53664/4082052>Effectively work with multiple files</a><li><a href=https://joshldavis.com/2014/04/05/vim-tab-madness-buffers-vs-tabs/>When to use Buffers and when to use Tabs</a><li><a href=https://vimhelp.org/editing.txt.html#argument-list>:h argument-list</a> — for working only with the files provided as Vim CLI arguments</ul><h2 id=search><a class=header href=#search>Search</a></h2><ul><li><kbd>/searchpattern</kbd> search the given pattern in the forward direction<li><kbd>?searchpattern</kbd> search the given pattern in the backward direction<li><kbd>Esc</kbd> ignore the currently typed pattern and return to Normal mode<li><kbd>n</kbd> move to the next match in the same direction as the last search <ul><li>if you used <code>/</code> for searching, <kbd>n</kbd> will move in the forward direction<li>if you used <code>?</code> for searching, <kbd>n</kbd> will move in the backward direction</ul><li><kbd>N</kbd> move to the next match in the opposite direction as the last search<li><kbd>/</kbd> followed by <kbd>Enter</kbd> repeat the last search in the forward direction<li><kbd>?</kbd> followed by <kbd>Enter</kbd> repeat the last search in the backward direction</ul><p>By default, the cursor is placed at the starting character of the match. There are various options to place the cursor at other locations:<ul><li><kbd>/searchpattern/s</kbd> place the cursor at the start of the match <ul><li>same as <kbd>/searchpattern</kbd> or <kbd>/searchpattern/s+0</kbd></ul><li><kbd>/searchpattern/s+2</kbd> place the cursor <code>2</code> characters after the start of the match (i.e. third character of the match)<li><kbd>/searchpattern/s-2</kbd> place the cursor <code>2</code> characters before the start of the match<li><kbd>/searchpattern/e</kbd> place the cursor at the end of the match<li><kbd>/searchpattern/e+4</kbd> place the cursor <code>4</code> characters after the end of the match<li><kbd>/searchpattern/e-4</kbd> place the cursor <code>4</code> characters before the end of the match<li><kbd>/searchpattern/+3</kbd> place the cursor <code>3</code> lines below the match<li><kbd>/searchpattern/-3</kbd> place the cursor <code>3</code> lines above the match</ul><p>Highlight settings:<ul><li><kbd>:set hlsearch</kbd> highlight the matched patterns<li><kbd>:set nohlsearch</kbd> do not highlight matched patterns<li><kbd>:set hlsearch!</kbd> toggle the highlight setting<li><kbd>:set hlsearch?</kbd> check what is the current highlight setting<li><kbd>:noh</kbd> clear currently highlighted patterns, if any (<code>:noh</code> is short for <code>:nohlsearch</code>)</ul><blockquote><p><img src=./images/info.svg alt=info> You can prefix a count value to <code>/</code>, <code>?</code>, <code>n</code> and <code>N</code> commands. Also, searching will automatically wrap around when it reaches the top or bottom of the file contents, unless you set the <code>nowrapscan</code> option.</blockquote><blockquote><p><img src=./images/info.svg alt=info> Certain characters like <code>.</code>, <code>^</code>, <code>$</code>, etc have special meaning in the <code>searchpattern</code>. These will be discussed in detail in the <strong>Regular Expressions</strong> chapter.</blockquote><h2 id=range><a class=header href=#range>Range</a></h2><p>By default, certain commands like <code>d</code> and <code>s</code> apply to the current line whereas commands like <code>w</code> and <code>perldo</code> apply to the entire file. You can use range to change the lines that are acted upon.<ul><li><kbd>:d</kbd> delete the current line<li><kbd>:.w filename</kbd> save the current line (represented by <code>.</code>) to the given filename <ul><li>recall that by default <code>w</code> works on the entire file</ul><li><kbd>:5d</kbd> delete the fifth line<li><kbd>:$d</kbd> delete the last line (represented by <code>$</code>)<li><kbd>:25m0</kbd> move the twenty-fifth line to the start of the file <ul><li>the number following <code>m</code> is the line number <em>after</em> which you want to place the lines specified by the range<li>use <code>t</code> (or <code>co</code> or <code>copy</code>) command if you want to copy instead of moving</ul><li><kbd>:2,10d</kbd> delete second to tenth lines (comma is used here to separate start and end ranges)<li><kbd>:5,$d</kbd> delete fifth line to the last line<li><kbd>:5,$-1d</kbd> delete fifth line to the last but one line<li><kbd>:%d</kbd> delete all the lines (<code>%</code> is a shortcut for <code>1,$</code> range)<li><kbd>:/pat1/,/pat2/d</kbd> delete the matching range of lines in the forward direction from the current cursor position (forward because <code>/</code> is used) <ul><li>if there are multiple matches, only the first such range will be deleted<li>use <code>?pattern?</code> to find a match in the backward direction<li>you can also mix these two types of direction if needed</ul><li><kbd>:/pat1/;+1d</kbd> delete the line matching <code>pat1</code> as well as the line after (total <code>2</code> lines) <ul><li>using <code>;</code> will set the line matched by the first pair of the range as the current line for the second pair</ul><li><kbd>:/pat1/;-2d</kbd> delete the line matching <code>pat1</code> as well as two lines before (total <code>3</code> lines)<li><kbd>:5;/pat1/d</kbd> delete from fifth line to a line matching <code>pat1</code> after the fifth line <ul><li>note the use of <code>;</code> again here, the search will be based on the current cursor line if you use <code>,</code> instead of <code>;</code></ul><li><kbd>:'a,'bd</kbd> delete from the line marked by <code>a</code> to the line marked by <code>b</code></ul><blockquote><p><img src=./images/info.svg alt=info> If you press <kbd>:</kbd> after a visual selection, you'll automatically get <code>:'<,'></code> as the visual range. If you prefix a number before pressing <kbd>:</kbd>, you'll get a range with that many lines — for example <kbd>10:</kbd> will give you <code>:.,.+9</code> as the range.</blockquote><blockquote><p><img src=./images/info.svg alt=info> See <a href=https://vimhelp.org/usr_10.txt.html#10.3>:h 10.3</a> and <a href=https://vimhelp.org/cmdline.txt.html#cmdline-ranges>:h cmdline-ranges</a> for more details.</blockquote><blockquote><p><img src=./images/info.svg alt=info> See <a href=https://vimhelp.org/index.txt.html#ex-cmd-index>:h ex-cmd-index</a> for a complete list of <code>:</code> commands.</blockquote><h2 id=search-and-replace><a class=header href=#search-and-replace>Search and Replace</a></h2><pre><code class=language-vim>:[range]s[ubstitute]/{pattern}/{string}/[flags] [count]
</code></pre><p>General syntax for <code>s</code> command (short for <code>substitute</code>) is shown above. Space between the <code>range</code> and <code>s</code> is optional, which you can use for readability.<ul><li><kbd>: s/a/b/</kbd> replace the first occurrence of <code>a</code> with <code>b</code> on the current line only <ul><li>you can also use <kbd>:. s/a/b/</kbd> (recall that <code>.</code> can be used to represent the current line)<li>the second <code>/</code> delimiter is optional in this case</ul><li><kbd>:2 s/apple/Mango/i</kbd> replace the first occurrence of <code>apple</code> with <code>Mango</code> on the second line only <ul><li><code>i</code> flag matches the <code>searchpattern</code> case insensitively</ul><li><kbd>:3,6 s/call/jump/g</kbd> replace all the occurrences of <code>call</code> with <code>jump</code> on lines <code>3</code> to <code>6</code> <ul><li><code>g</code> flag performs search and replace for all the matching occurrences</ul><li><kbd>:5,$ s/call/jump/g</kbd> replace all the occurrences of <code>call</code> with <code>jump</code> from the fifth line to the end of the file<li><kbd>:% s/call/jump/g</kbd> replace all the occurrences of <code>call</code> in the file with <code>jump</code> <ul><li>recall that <code>%</code> is a shortcut for the range <code>1,$</code></ul></ul><blockquote><p><img src=./images/info.svg alt=info> You can leave the <code>searchpattern</code> as empty to reuse the previously searched pattern, which could be from <code>/</code>, <code>?</code>, <code>*</code>, <code>s</code> command, etc.</blockquote><blockquote><p><img src=./images/info.svg alt=info> The substitute command will be discussed with more details in the <strong>Regular Expressions</strong> chapter.</blockquote><h2 id=editing-lines-filtered-by-a-pattern><a class=header href=#editing-lines-filtered-by-a-pattern>Editing lines filtered by a pattern</a></h2><pre><code class=language-vim>:[range]g[lobal]/{pattern}/[cmd]
</code></pre><p>General syntax for <code>g</code> command (short for <code>global</code>) is shown above. This command is used to edit lines that are first filtered based on a <code>searchpattern</code>. You can use <code>g!</code> or <code>v</code> to act on lines <em>not</em> satisfying the filtering condition.<ul><li><kbd>:g/call/d</kbd> delete all lines containing <code>call</code><li><kbd>:g/^#/t0</kbd> copy all lines starting with <code>#</code> to the start of the file<li><kbd>:1,5 g/call/d</kbd> delete all lines containing <code>call</code> only for the first five lines<li><kbd>:v/jump/d</kbd> delete all lines <em>not</em> containing <code>jump</code> <ul><li>same as <kbd>:g!/jump/d</kbd></ul><li><kbd>:g/cat/ s/animal/mammal/g</kbd> replace <code>animal</code> with <code>mammal</code> only for the lines containing <code>cat</code><li><kbd>:.,.+20 g/^#/ normal >></kbd> indent the current line and the next <code>20</code> lines only if the line starts with <code>#</code> <ul><li>Note the use of <code>normal</code> when you need to use Normal mode commands on the filtered lines</ul></ul><blockquote><p><img src=./images/info.svg alt=info> See <a href=https://vimhelp.org/repeat.txt.html#%3Aglobal>:h :g</a> for more details.</blockquote><h2 id=shell-commands><a class=header href=#shell-commands>Shell commands</a></h2><p>One can also use shell commands from within Vim (assuming you have access to these commands).<ul><li><kbd>:!ls</kbd> execute the given shell command and display output <ul><li>the results are displayed as part of an expanded Command-line area, doesn't change contents of the file</ul><li><kbd>:.! date</kbd> replace the current line with the output of the given command<li><kbd>:%! sort</kbd> sort all the lines<li><kbd>:3,8! sort</kbd> sort only lines <code>3</code> to <code>8</code><li><kbd>:r! date</kbd> insert output of the given command below the current line<li><kbd>:r report.log</kbd> insert contents of the given file below the current line <ul><li>Note that <code>!</code> is not used here since there is no shell command</ul><li><kbd>:.!grep '^Help ' %</kbd> replace the current line with all the lines starting with <code>Help</code> in the current file<li><kbd>:sh</kbd> open a shell session within Vim <ul><li>use <code>exit</code> command to quit the session</ul></ul><blockquote><p><img src=./images/info.svg alt=info> See <a href=https://vimhelp.org/various.txt.html#%3A%21cmd>:h :!</a>, <a href=https://vimhelp.org/various.txt.html#%3Ash>:h :sh</a> and <a href=https://vimhelp.org/insert.txt.html#%3Ar>:h :r</a> for more details.</blockquote><h2 id=terminal-mode><a class=header href=#terminal-mode>Terminal mode</a></h2><ul><li><kbd>:terminal</kbd> open a new terminal window as a horizontal split <ul><li>the terminal window opens above the current window unless <code>splitbelow</code> option is set<li>you can then use shell commands as you would normally do from a terminal</ul><li><kbd>:vertical :terminal</kbd> open a new terminal window as a vertical split <ul><li>the terminal window opens to the left of the current window unless <code>splitright</code> option is set</ul><li><kbd>Ctrl</kbd>+<kbd>w</kbd> followed by another <kbd>Ctrl</kbd>+<kbd>w</kbd> move to the next window (helps you to easily switch back and forth if you have one text editing window and one terminal window)<li><kbd>Ctrl</kbd>+<kbd>w</kbd> followed by <kbd>N</kbd> goes to Terminal-Normal mode which will help you to move around using Normal mode commands, copy text, etc (note that you need to use uppercase <code>N</code> here) <ul><li><kbd>Ctrl</kbd>+<kbd>\</kbd> followed by <kbd>Ctrl</kbd>+<kbd>n</kbd> another way to go to Terminal-Normal mode<li><kbd>:tnoremap &LTEsc> &LTC-w>N</kbd> map <kbd>Esc</kbd> key to go to Terminal-Normal mode (use of maps will be discussed in more detail in <strong>Customizing Vim</strong> chapter)</ul><li><kbd>Ctrl</kbd>+<kbd>w</kbd> followed by <kbd>:</kbd> go to Command-line mode from terminal window</ul><blockquote><p><img src=./images/info.svg alt=info> Depending on your shell, you can use the <code>exit</code> command to end the terminal session. <code>Ctrl+d</code> might work too.</blockquote><blockquote><p><img src=./images/info.svg alt=info> There are lot of features in this mode, see <a href=https://vimhelp.org/terminal.txt.html>:h terminal</a> for more details.</blockquote><h2 id=line-number-settings><a class=header href=#line-number-settings>Line number settings</a></h2><ul><li><kbd>:set number</kbd> prefix line numbers <ul><li>this is a visual guideline, doesn't modify the text</ul><li><kbd>:set nonumber</kbd> remove line number prefix<li><kbd>:set number!</kbd> toggle number setting<li><kbd>:set relativenumber</kbd> prefix line numbers relative to the current line <ul><li>current line is given <code>0</code>, lines above and below the current line are assigned <code>1</code>, two lines above and below are assigned <code>2</code> and so on<li>useful visual guide for commands like <kbd>11yy</kbd>, <kbd>6>></kbd>, <kbd>9j</kbd>, etc</ul><li><kbd>:set norelativenumber</kbd> remove relative line number prefix<li><kbd>:set relativenumber!</kbd> toggle relative number setting</ul><h2 id=sessions><a class=header href=#sessions>Sessions</a></h2><ul><li><kbd>:mksession proj.vim</kbd> save the current Vim session with details like cursor position, file list, layout, etc <ul><li>you can customize things to be saved using the <code>sessionoptions</code> setting<li>for example, <kbd>:set sessionoptions+=resize</kbd> will save resized window information as well</ul><li><kbd>:mksession! proj.vim</kbd> overwrite existing session<li><kbd>:source proj.vim</kbd> restore Vim session from <code>proj.vim</code> file <ul><li><code>vim -S proj.vim</code> restore a Vim session from the command line</ul></ul><blockquote><p><img src=./images/info.svg alt=info> See <a href=https://vimhelp.org/usr_21.txt.html#21.4>:h 21.4</a>, <a href=https://vimhelp.org/starting.txt.html#views-sessions>:h views-sessions</a> and <a href=https://vimhelp.org/options.txt.html#%27sessionoptions%27>:h 'sessionoptions'</a> for more details.</blockquote><blockquote><p><img src=./images/info.svg alt=info> See <a href=https://stackoverflow.com/q/1642611/4082052>stackoverflow: How to save and restore multiple different sessions in Vim?</a> for custom settings to automate the save and restore process and other tips and tricks. See also <a href=https://github.com/iggredible/Learn-Vim/blob/master/ch20_views_sessions_viminfo.md>Learn-Vim: Views, Sessions, and Viminfo</a>.</blockquote><h2 id=command-line-history-window-and-completion><a class=header href=#command-line-history-window-and-completion>Command-line history, window and completion</a></h2><p>There are separate history lists that makes it easy to reuse previously typed commands:<ol><li><code>:</code> commands<li>search patterns<li>expressions<li>input lines<li>debug mode commands</ol><p>Here are some movement and editing features you can use on the command-line:<ul><li><kbd>↑</kbd> and <kbd>↓</kbd> move through the history lists <ul><li>if you have typed some characters, the search will match only the commands starting with those characters</ul><li><kbd>←</kbd> and <kbd>→</kbd> move the cursor left and right respectively by one character<li><kbd>Ctrl</kbd>+<kbd>←</kbd> and <kbd>Ctrl</kbd>+<kbd>→</kbd> move the cursor left and right respectively by one WORD <ul><li>you can also use <kbd>Shift</kbd> key instead of <kbd>Ctrl</kbd></ul><li><kbd>Ctrl</kbd>+<kbd>b</kbd> or <kbd>Home</kbd> move to the beginning<li><kbd>Ctrl</kbd>+<kbd>e</kbd> or <kbd>End</kbd> move to the end<li><kbd>Ctrl</kbd>+<kbd>w</kbd> delete word before the cursor<li><kbd>Ctrl</kbd>+<kbd>u</kbd> delete all characters before the cursor<li><kbd>Ctrl</kbd>+<kbd>r</kbd> insert the contents of numbered or named register <ul><li><kbd>Ctrl</kbd>+<kbd>r</kbd> followed by <kbd>%</kbd> inserts the current file name<li><kbd>Ctrl</kbd>+<kbd>r</kbd> followed by <kbd>a</kbd> inserts the content of <code>"a</code> register</ul><li><kbd>Ctrl</kbd>+<kbd>d</kbd> auto complete based on the characters typed so far<li><kbd>Ctrl</kbd>+<kbd>c</kbd> cancel and go back to Normal mode</ul><p>You can also view, edit and execute history of commands using a special Command-line window. You can open this special window from Normal mode as well as Command-line mode. This window will be in Normal mode by default, which will allow you to move around easily. You can also edit any of the history commands if you wish.<ul><li><kbd>q:</kbd> window for <code>:</code> commands (from Normal mode)<li><kbd>q/</kbd> and <kbd>q?</kbd> window for search patterns (from Normal mode)<li><kbd>Ctrl</kbd>+<kbd>f</kbd> use this shortcut if you are already in the Command-line mode, opens appropriate <code>:</code> or search pattern windows automatically, any text you've typed so far will be preserved as the most recent command<li><kbd>Enter</kbd> to execute the command under the cursor<li><kbd>Ctrl</kbd>+<kbd>c</kbd> continue editing the command under the cursor in the usual Command-line area, the window will still be visible<li><kbd>:q</kbd> quit the window and go to Normal mode</ul><blockquote><p><img src=./images/info.svg alt=info> See <a href=https://vimhelp.org/cmdline.txt.html#cmdline-history>:h cmdline-history</a> and <a href=https://vimhelp.org/cmdline.txt.html#cmdline-window>:h cmdline-window</a> for more details. You can change the number of entries that are remembered using the <code>history</code> setting.</blockquote><blockquote><p><img src=./images/info.svg alt=info> See <a href=https://vimhelp.org/usr_20.txt.html>:h usr_20.txt</a> for a nice tutorial on working effectively in the Command-line mode.</blockquote></main><nav class=nav-wrapper aria-label="Page navigation"><a rel=prev href=Normal-mode.html class="mobile-nav-chapters previous"title="Previous chapter"aria-label="Previous chapter"aria-keyshortcuts=Left> <i class="fa fa-angle-left"></i> </a><a rel=next href=Visual-mode.html class="mobile-nav-chapters next"title="Next chapter"aria-label="Next chapter"aria-keyshortcuts=Right> <i class="fa fa-angle-right"></i> </a><div style="clear: both"></div></nav></div></div><nav class=nav-wide-wrapper aria-label="Page navigation"><a rel=prev href=Normal-mode.html class="nav-chapters previous"title="Previous chapter"aria-label="Previous chapter"aria-keyshortcuts=Left> <i class="fa fa-angle-left"></i> </a><a rel=next href=Visual-mode.html class="nav-chapters next"title="Next chapter"aria-label="Next chapter"aria-keyshortcuts=Right> <i class="fa fa-angle-right"></i> </a></nav></div><script>
            window.playground_copyable = true;
        </script><script src=elasticlunr.min.js charset=utf-8></script><script src=mark.min.js charset=utf-8></script><script src=searcher.js charset=utf-8></script><script src=clipboard.min.js charset=utf-8></script><script src=highlight.js charset=utf-8></script><script src=book.js charset=utf-8></script><script src=sidebar.js></script>